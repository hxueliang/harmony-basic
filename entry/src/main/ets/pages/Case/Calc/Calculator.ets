/**
 * 计算逻辑
 */
export class Calculator {
  /**
   * 递归计算直至完成，一次计算一对数，从在往右，乘除法优先于加减法
   * @param split
   * @returns
   */
  static recursiveCompute(split: string[]): string[] {
    let symbolIndex: number | null = null
    // 先寻找乘除符号
    for (let i = 0; i < split.length; i++) {
      if (split[i].match(RegExp('^(\\*|\\/)$')) !== null) {
        symbolIndex = i
        break
      }
    }
    // 若没找到乘除符号，则寻找加减符号
    if (symbolIndex === null) {
      for (let j = 0; j < split.length; j++) {
        if (split[j].match(RegExp('^(\\+|-)$')) !== null) {
          symbolIndex = j
          break
        }
      }
    }
    // 若没找到运算符号，则表明计算结束，返回结果
    if (symbolIndex === null) {
      return split
    }
    // 若找到运算符号，则运算后继续寻找运算
    else {
      let num1 = Number(split[symbolIndex - 1])
      let symbol = split[symbolIndex]
      let num2 = Number(split[symbolIndex + 1])
      let result = 0
      switch (symbol) {
        case '+':
          result = num1 + num2
          break
        case '-':
          result = num1 - num2
          break
        case '*':
          result = num1 * num2
          break
        case '/':
          result = num1 / num2
          break
      }
      split = split.slice(0, symbolIndex - 1).concat(`${result}`).concat(split.slice(symbolIndex + 2))
      return Calculator.recursiveCompute(split)
    }
  }
}